# V3 NPU 최적화 모델 훈련 프로세스

**프로젝트**: Ethos Vision Optimizer
**훈련 세션**: V3 NPU 최적화 모델
**완료일**: 2025-10-01
**총 모델 수**: 6개

---

## 📊 **훈련 개요**

V3 훈련 세션은 ARM Ethos-N NPU에 최적화된 YOLO 모델 개발을 목표로 **3개 최적화 레벨**과 **2개 활성화 함수**를 조합하여 총 6개 모델을 성공적으로 훈련 완료했습니다.

### **훈련 매트릭스**
| 최적화 레벨 | ReLU | LeakyReLU |
|-------------|------|-----------|
| **Level 2** | ✅ 완료 | ✅ 완료 |
| **Level 3** | ✅ 완료 | ✅ 완료 |
| **Level 4** | ✅ 완료 | ✅ 완료 |

---

## 🎯 **최적화 레벨 정의**

### **Level 2: 기본 최적화**
- **목표**: NPU 호환성 우선 최적화
- **변경사항**:
  - Backbone/Head: C3k2 → C2f 변환
  - 기본적인 경량화 적용
- **특징**: 가장 높은 NPU 호환성 (99.0%)

### **Level 3: 중급 최적화**
- **목표**: 정확도와 성능 균형
- **변경사항**:
  - 전체 C2PSA → C2f 변환 (어텐션 제거)
  - 중간 단계 최적화 적용
- **특징**: 우수한 NPU 호환성 (96.2%)

### **Level 4: 완전 최적화**
- **목표**: 최대 최적화 적용
- **변경사항**:
  - 모든 구성요소 최적화
  - 최대 경량화 및 NPU 친화성
- **특징**: Level 3과 동일한 NPU 호환성

---

## 📈 **훈련 결과 요약**

### **성능 랭킹 (mAP50 기준)**
| 순위 | 모델 | mAP50 | mAP50-95 | 특징 |
|------|------|-------|----------|------|
| 🥇 | **Level 4 LeakyReLU** | **90.1%** | **76.9%**| 최고 정확도 |
| 🥈 | Level 4 ReLU | 87.8% | 74.6% | 우수한 균형 |
| 🥉 | Level 3 LeakyReLU | 87.4% | 74.1% |  정확도 우수 |
| 4 | Level 3 ReLU | 85.0% | 71.8% |  NPU 최적화 |
| 5 | Level 2 LeakyReLU | 81.2% | 68.7% | 기본 성능 |
| 6 | Level 2 ReLU | 80.7% | 68.2% | 최고 NPU 호환성 |

---

## 🔍 **주요 발견사항**

### **1. 활성화 함수 영향**
- **LeakyReLU**: 정확도 우수 (+2-3%p), NPU 호환성 제한
- **ReLU**: NPU 호환성 우수 (96-99%), 정확도 약간 낮음

### **2. 최적화 레벨 영향**
- **Level 2**: 최고 NPU 호환성 (99.0%)
- **Level 3/4**: 동일한 NPU 성능 (96.2%), 정확도는 Level 4가 우수

### **3. NPU 호환성 격차**
- **ReLU 모델**: 96-99% NPU 함수 처리
- **LeakyReLU 모델**: 43% NPU 함수 처리 (CPU 폴백 필요)

---

## 📊 **개별 모델 상세 결과**

### **Level 2 ReLU**
- **훈련 완료**: 2025-10-01
- **mAP50**: 80.7% | **mAP50-95**: 68.2%
- **NPU 호환성**: 99.0% (104개 함수)
- **특징**: 최고 NPU 호환성, 엣지 배포 최적
- **권장 용도**: 실시간 추론, 모바일 배포

### **Level 2 LeakyReLU**
- **훈련 완료**: 2025-10-01
- **mAP50**: 81.2% | **mAP50-95**: 68.7%
- **NPU 호환성**: 미측정 (분석 실패)
- **특징**: 기본 정확도 우수
- **권장 용도**: GPU 환경 배포

### **Level 3 ReLU**
- **훈련 완료**: 2025-10-01
- **mAP50**: 85.0% | **mAP50-95**: 71.8%
- **NPU 호환성**: 96.2% (101개 함수)
- **특징**: 정확도와 NPU 성능 균형
- **권장 용도**: 일반적인 NPU 배포

### **Level 3 LeakyReLU**
- **훈련 완료**: 2025-10-01
- **mAP50**: 87.4% | **mAP50-95**: 74.1%
- **NPU 호환성**: 43.3% (45개 함수)
- **특징**: 높은 정확도, NPU 제한
- **권장 용도**: 정확도 우선 환경

### **Level 4 ReLU**
- **훈련 완료**: 2025-10-01 (69분)
- **mAP50**: 87.8% | **mAP50-95**: 74.6%
- **NPU 호환성**: 96.2% (101개 함수)
- **특징**: 우수한 정확도 + NPU 최적화
- **권장 용도**: 프로덕션 배포
- **상세 보고서**: `results/training/v3/LEVEL4_ReLU_TRAINING_REPORT.md`

### **Level 4 LeakyReLU**
- **훈련 완료**: 2025-10-01 (69분)
- **mAP50**: 90.1% | **mAP50-95**: 76.9%
- **NPU 호환성**: 43.3% (45개 함수)
- **특징**: V3 시리즈 최고 정확도
- **권장 용도**: 정밀 검출, 연구용
- **상세 보고서**: `results/training/v3/LEVEL4_LeakyReLU_TRAINING_REPORT.md`

---

## 🛠️ **훈련 설정**

### **공통 하이퍼파라미터**
| 파라미터 | 값 | 설명 |
|----------|-----|------|
| **에포크** | 100 | 모든 모델 동일 |
| **배치 크기** | 16 | 메모리 최적화 |
| **입력 크기** | 640×640 | 표준 YOLO 입력 |
| **옵티마이저** | SGD | 안정적 수렴 |
| **학습률** | 0.003 → 0.0001 | 선형 감소 |
| **모멘텀** | 0.9 | SGD 파라미터 |

### **데이터셋**
- **타입**: 교통표지판 Detection
- **훈련/검증**: 80/20 분할
- **클래스 수**: 다중 클래스 detection
- **증강**: 표준 YOLO 증강 적용

---

## 🚀 **배포 권장사항**

### **시나리오별 최적 모델**

#### **🎯 실시간 NPU 추론**
- **권장**: Level 2 ReLU
- **이유**: 99.0% NPU 호환성
- **용도**: 자율주행, 실시간 감시

#### **⚖️ 균형잡힌 성능**
- **권장**: Level 4 ReLU
- **이유**: 높은 정확도 + 우수한 NPU 호환성
- **용도**: 일반적인 프로덕션 환경

#### **🏆 최고 정확도**
- **권장**: Level 4 LeakyReLU
- **이유**: 90.1% mAP50 (최고 성능)
- **용도**: 정밀 검출, 연구 및 벤치마크

---

## 📁 **결과 파일 구조**

```
results/training/v3/
├── level2_relu/
│   ├── results.csv
│   ├── args.yaml
│   └── weights/best.pt
├── level2_leaky/
│   ├── results.csv
│   ├── args.yaml
│   └── weights/best.pt
├── level3_relu/
│   ├── results.csv
│   ├── args.yaml
│   └── weights/best.pt
├── level3_leaky/
│   ├── results.csv
│   ├── args.yaml
│   └── weights/best.pt
├── level4_relu/
│   ├── results.csv
│   ├── args.yaml
│   └── weights/best.pt
├── level4_leaky/
│   ├── results.csv
│   ├── args.yaml
│   └── weights/best.pt
├── LEVEL4_ReLU_TRAINING_REPORT.md
└── LEVEL4_LeakyReLU_TRAINING_REPORT.md
```

---

## 🔬 **추가 분석 자료**

### **관련 보고서**
- **정확도 분석**: `results/accuracy/v3/V3_MODELS_COMPARISON_REPORT.md`
- **NPU 호환성**: `models/npu_report/v3/V3_NPU_상세분석보고서.md`
- **양자화 분석**: `models/quantization/V3_양자화_모델_크기_분석보고서.md`

### **양자화 결과**
- **Level 2 ReLU**: 6.6MB → 3.3MB (50% 압축)
- **INT8 양자화**: 평균 73% 크기 감소
- **NPU 배포 준비**: Full Integer Quantization 완료

---

## 🎯 **결론**

V3 훈련 세션은 **성공적으로 6개 모델 모두 완료**되어 다양한 배포 시나리오에 대응할 수 있는 모델 포트폴리오를 구축했습니다.

**핵심 성과**:
- ✅ **최고 정확도**: Level 4 LeakyReLU (90.1% mAP50)
- ✅ **최고 NPU 호환성**: Level 2 ReLU (99.0%)
- ✅ **균형잡힌 성능**: Level 4 ReLU (87.8% + 96.2% NPU)

**배포 전략**: 용도에 따라 정확도 우선 또는 NPU 성능 우선 모델 선택 가능

---

**문서 생성일**: 2025-10-02
**훈련 로그 위치**: `results/training/v3/`
**프로젝트**: Ethos Vision Optimizer